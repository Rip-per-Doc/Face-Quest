let player;
let bullets, arrows, missiles, flames, explosion;
let broadSword, shortSword, ZweiHander, fireAxe, battleAxe, hatchet, wingedSpear, katana, dagger, knife
let devRoom, Lvl1, Lvl2, Lvl3, Lvl4
let walls
let currentWeapon;
function setup() {
	new Canvas(1920, 1080);
	displayMode('centered')

	player = new Sprite(400,400);
    player.h = 28
    player.w = 28

	projectiles = new Group()

	walls = new Group()
	walls.w = 32 // sets sprite width
	walls.h = 32 // sets sprite height
	walls.tile = 'b' // defines which tiles are in this group
	walls.color = 'white'
	walls.physics = 's' // makes the tiles in this group static objects

    playerSpawn = new Group()
    playerSpawn.tile = 'l'
    playerSpawn.physics = 'n'

    weapon = new Group()
    weapon.type = ''


    rustyRevolver = new weapon.Group()
    rustyRevolver.type = 'single'
    rustyRevolver.img = 'rustyRevolver.png'
    rustyRevolver.image.scale = 2

    rustyShotgun = new weapon.Group()
    rustyShotgun.type = 'blast'
    

    currentWeapon = new rustyRevolver.Sprite() // test
    currentWeapon.x = player.x + 28
    currentWeapon.y = player.y
    currentWeapon.physics = 'd'

    heldWeapon = new GlueJoint(currentWeapon,player)


	devRoom = new Tiles(levels[0],0,0,32,32)
    }

function preload(){
    loadImage('rustyRevolver.png')
}

function move(){
    camera.on //activates camera control 
    camera.x = player.x //makes camera follow player horizontally
    camera.y = player.y //makes camera follow player vertically
    if (kb.pressing('a')){
        player.vel.x = -2
    }
    else if(kb.pressing('d')){
        player.vel.x = 2
    }
   
    else{
        player.vel.x = 0
    }
   
    if(kb.pressing('w')){
        player.vel.y = -2
    }
   
    else if(kb.pressing('s')){
        player.vel.y = 2
    }
   
    else{
        player.vel.y = 0
    }
    if (mouse.pressed()){
        attack()
    }
    player.rotateMinTo(mouse,20) //makes sprite rotate in direction of mouse
    camera.off //deactivates camera control
}

function attack(){
    if(currentWeapon.type == 'single'){    
        let p = new projectiles.Sprite(currentWeapon.x,currentWeapon.y, 5,5)
        p.direction = p.angleTo(mouse)
        p.speed = 7
        p.color = 'yellow'
        
    }
}
function draw(){
	background('black');

}

function update(){
	move()
	for (p of projectiles){
		for (w of walls){
			if (p.collides(w)){
				p.remove()
			}
		}
	}
}


let levels = [
    ["..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"........................bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b...............l......................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb............................................................................................................b..........",
"...................................................................................................................................bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb..........",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",],0,0,32,32

]
