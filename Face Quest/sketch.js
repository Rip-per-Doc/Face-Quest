let player;
let bullets, arrows, missiles, flames, explosion;
let broadSword, shortSword, ZweiHander, fireAxe, battleAxe, hatchet, wingedSpear, katana, dagger, knife
let devRoom, Lvl1, Lvl2, Lvl3, Lvl4
let walls

function setup() {
	new Canvas(1920, 1080);
	displayMode('centered')

	player = new Sprite(400,400,);

	projectiles = new Group()

	walls = new Group()
	walls.w = 32 // sets sprite width
	walls.h = 32 // sets sprite height
	walls.tile = 'b' // defines which tiles are in this group
	walls.color = 'white'
	walls.physics = 's' // makes the tiles in this group static objects

    playerSpawn = new Group()
    playerSpawn.tile = 'l'
    playerSpawn.physics = 'n'

    weapon = new class{
        constructor(sizeX, sizeY, posX, posY, type, equipped){
            weapon.sizeX = this.sizeX,
            weapon.sizeY = this.sizeY,
            weapon.posX = this.posX,
            weapon.posY = this.posY,
            equipped = this.equipped
        }
        attack(){

        }
        equip(){

        }
    }

    
    class ranged extends weapon{
        constructor(typeProjectile, ammo){
            super(sizeX, sizeY, posX, posY, type, equipped)
            typeProjectile = this.typeProjectile
            ammo = this.ammo
        }
        reload(){
        }
    }
    
    rustyRevolver = new ranged(5, 5, player.x, player.y, semiAuto, true, bullets, 7)

    class melee extends weapon{
        constructor(){
        }
        block(){

        }
    }

    class magic extends weapon{
        constructor(){
            typeProjectile = this.typeProjectile,
            effect = this.effect,
            manaCost = this.manaCost
        }
    }


	devRoom = new Tiles(["..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"........................bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b...............l......................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
"........................b......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................b.......................................................................................................................................................................................................................b..........",
".......................bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb............................................................................................................b..........",
"...................................................................................................................................bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb..........",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",
"..........................................................................................................................................................................................................................................................",],0,0,32,32)
}

function preload(){

}

function move(){
    camera.on //activates camera control 
    camera.x = player.x //makes camera follow player horizontally
    camera.y = player.y //makes camera follow player vertically
    if (kb.pressing('a')){
        player.vel.x = -2
    }
    else if(kb.pressing('d')){
        player.vel.x = 2
    }
   
    else{
        player.vel.x = 0
    }
   
    if(kb.pressing('w')){
        player.vel.y = -2
    }
   
    else if(kb.pressing('s')){
        player.vel.y = 2
    }
   
    else{
        player.vel.y = 0
    }
    player.rotateMinTo(mouse,20) //makes sprite rotate in direction of mouse
    camera.off //deactivates camera control
}

//Shooting functions
function shootWeaponSemi(){ //causes projectile dictated in weapon class to spawn and move in the direction the player was looking, when left mouse released
    if(mouse.released()){
        let p = new projectiles.Sprite(player.x,player.y , 5,5)
        p.direction = p.angleTo(mouse) //makes bullets move in direction of mouse 
        p.speed = 7
        p.color = 'yellow'
		
	}

}

function shootWeaponFull(){ 
}

function shootWeaponBurst(){


}

function shootWeaponSpread(){ 
}

function shootWeaponMissile(){

		
}

function shootWeaponFlame(){


}

function draw(){
	background('black');

}

function update(){
	move()
	for (p of projectiles){
		for (w of walls){
			if (p.collides(w)){
				p.remove()
			}
		}
	}
}